{"version":3,"sources":["components/matches/CopyReceiver.js","common/utils.js","components/matches/Pairs.js","components/matches/match-pairs.js","components/matches/Matches.js","common/x.svg","common/RemoveButton.js","components/person/Person.js","components/person/utils.js","common/ValidationError.js","components/person/PersonForm.js","components/Main.js","common/useStoredState.js","components/Santa.js","components/App.js","index.js"],"names":["CopyReceiver","string","giver","receiver","useState","copyText","setCopyText","text","window","location","origin","toString","aes","encrypt","process","href","onClick","setTimeout","Pairs","pairs","showGroups","length","style","marginTop","colSpan","map","a","b","name","group","matchPairs","person","calculateSync","timeout","p","i","Matches","setPairs","error","setError","setShowGroups","useLayoutEffect","calculateMatches","e","Error","type","disabled","paddingLeft","onChange","prevState","checked","className","message","_extends","Object","assign","target","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","x1","y1","x2","y2","SvgX","_ref","svgRef","title","titleId","props","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","ref","id","ForwardRef","RemoveButton","aria-hidden","Person","removePerson","groups","useMemo","reduce","acc","find","item","push","sort","localeCompare","mapPersonByGroup","groupId","aria-labelledby","ValidationError","children","PersonForm","usedNames","usedGroups","onSubmit","useForm","errors","handleSubmit","register","reset","data","undefined","htmlFor","aria-required","required","validate","value","includes","as","list","autoComplete","isString","str","Main","defaultValue","localStorage","getItem","JSON","parse","setValue","useEffect","setItem","stringify","useStoredState","setPerson","Set","filter","prev","concat","prevPerson","Santa","reciver","App","hash","searchParams","prmstr","search","substr","params","prmarr","split","tmparr","transformToArray","getSearchParameters","role","decrypt","cryptojs","enc","Utf8","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5b340cd4.chunk.js","sourcesContent":["import { useState } from 'react'\nimport { CopyToClipboard } from 'react-copy-to-clipboard'\n\nimport { encryptString } from '../../common/utils'\n\nexport const CopyReceiver = ({ giver, receiver }) => {\n  const [copyText, setCopyText] = useState('Copy link')\n\n  const showCopied = () => {\n    setCopyText('Copied')\n    setTimeout(() => {\n      setCopyText('Copy link')\n    }, 1000)\n  }\n\n  return (\n    <CopyToClipboard\n      text={`${window.location.origin.toString()}/secret-santa/?giver=${giver}&key=${encryptString(\n        receiver\n      )}`}\n    >\n      <a href=\"#\" onClick={showCopied}>\n        {copyText}\n      </a>\n    </CopyToClipboard>\n  )\n}\n","import aes from 'crypto-js/aes'\nimport cryptojs from 'crypto-js'\n\nexport const encryptString = (string) => {\n  const key = process.env.REACT_APP_ENCRYPT_KEY\n  return aes.encrypt(string, key)\n}\n\nexport const decryptHash = (hash) => {\n  const key = process.env.REACT_APP_ENCRYPT_KEY\n  const plaintext = aes.decrypt(hash.toString(), key)\n  return plaintext.toString(cryptojs.enc.Utf8)\n}\n\nconst transformToArray = (prmstr) => {\n  let params = {}\n  let prmarr = prmstr.split('&')\n  for (let i = 0; i < prmarr.length; i++) {\n    let tmparr = prmarr[i].split('=')\n    params[tmparr[0]] = tmparr[1]\n  }\n  return params\n}\n\nexport const getSearchParameters = () => {\n  let prmstr = window.location.search.substr(1)\n  return prmstr !== null && prmstr !== '' ? transformToArray(prmstr) : {}\n}\n","import { CopyReceiver } from './CopyReceiver'\n\nexport const Pairs = ({ pairs, showGroups }) => {\n  if (pairs.length < 1) {\n    return null\n  }\n\n  return (\n    <table\n      style={{\n        marginTop: '15px',\n      }}\n    >\n      <thead>\n        <tr>\n          <th colSpan={showGroups ? 2 : 1}>Тайный санта</th>\n          <th colSpan={showGroups ? 2 : 1}>Получатель подарка</th>\n        </tr>\n        {showGroups && (\n          <tr>\n            <th>Имя</th>\n            <th>Группа</th>\n            <th>Имя</th>\n            <th>Группа</th>\n          </tr>\n        )}\n      </thead>\n      <tbody>\n        {pairs.map(([a, b]) => (\n          <tr key={a.name}>\n            <td>{a.name}</td>\n            {showGroups && <td>{a.group}</td>}\n            <td>\n              <CopyReceiver giver={a.name} receiver={b.name} />\n            </td>\n            {showGroups && <td>{b.group}</td>}\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  )\n}\n","import { calculateSync } from 'gift-exchange'\n\nconst matchPairs = (person) => {\n  return calculateSync(person, {\n    timeout: 5000,\n  }).map((p, i) => [person[i], p])\n}\n\nexport default matchPairs\n","import { useLayoutEffect, useState } from 'react'\n\nimport { Pairs } from './Pairs'\nimport matchPairs from './match-pairs'\n\nimport './matches.css'\n\nconst errorMessage =\n  'Невозможно совпадение с указанными людьми, или произошла ошибка. Пожалуйста, попробуйте еще раз или измените свою конфигурацию, чтобы позволить каждому совпадать с кем-то.'\n\nexport const Matches = ({ person }) => {\n  const [pairs, setPairs] = useState([])\n  const [error, setError] = useState(null)\n  const [showGroups, setShowGroups] = useState(false)\n\n  useLayoutEffect(() => {\n    setPairs([])\n  }, [person])\n\n  const calculateMatches = async () => {\n    setError(null)\n    try {\n      setPairs(matchPairs(person))\n    } catch (e) {\n      setError(new Error(errorMessage))\n      setPairs([])\n    }\n  }\n\n  return (\n    <>\n      <button\n        onClick={calculateMatches}\n        type=\"button\"\n        disabled={person.length < 3}\n      >\n        Совпадения\n      </button>\n      <label\n        style={{\n          paddingLeft: '15px',\n        }}\n      >\n        <input\n          type=\"checkbox\"\n          onChange={() => setShowGroups((prevState) => !prevState)}\n          checked={showGroups}\n        />\n        Показывать группы\n      </label>\n      {error && <p className=\"error\">{error.message}</p>}\n      <Pairs pairs={error ? [] : pairs} showGroups={showGroups} />\n    </>\n  )\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"line\", {\n  x1: 18,\n  y1: 6,\n  x2: 6,\n  y2: 18\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"line\", {\n  x1: 6,\n  y1: 6,\n  x2: 18,\n  y2: 18\n});\n\nfunction SvgX(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: 3,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgX);\nexport default __webpack_public_path__ + \"static/media/x.fbfc4ef6.svg\";\nexport { ForwardRef as ReactComponent };","import { ReactComponent as X } from './x.svg'\n\nexport const RemoveButton = ({ onClick }) => {\n  return (\n    <button onClick={onClick} className=\"muted\" title=\"Remove\" type=\"button\">\n      <X aria-hidden />\n    </button>\n  )\n}\n","import { useMemo } from 'react'\n\nimport { RemoveButton } from '../../common/RemoveButton'\nimport { mapPersonByGroup } from './utils'\n\nconst UNDEFINED_GROUP = 'fba449b5-deb3-400c-991c-4bac2bb1ad33'\n\nexport const Person = ({ person, removePerson }) => {\n  const groups = useMemo(() => mapPersonByGroup(person), [person])\n\n  if (!person.length) {\n    return null\n  }\n\n  return (\n    <>\n      <ul>\n        {groups.map((group) => {\n          const groupId = `person-group-${group.group ?? UNDEFINED_GROUP}`\n          return (\n            <li key={groupId}>\n              <span id={groupId}>\n                {group.group === null ? 'Нет группы' : group.group}\n              </span>\n              <ul aria-labelledby={groupId}>\n                {group.person.map((p) => (\n                  <li key={p.name}>\n                    {p.name} <RemoveButton onClick={() => removePerson(p)} />\n                  </li>\n                ))}\n              </ul>\n            </li>\n          )\n        })}\n      </ul>\n    </>\n  )\n}\n","export const mapPersonByGroup = (person) =>\n  person\n    .reduce((acc, person) => {\n      const group = acc.find((item) => item.group === (person.group ?? null))\n      if (group) {\n        group.person.push(person)\n      } else {\n        acc.push({\n          group: person.group ?? null,\n          person: [person],\n        })\n      }\n      return acc\n    }, [])\n    .sort((a, b) => {\n      if (a.group === null || b.group === null) {\n        return 1\n      }\n      return a.group.localeCompare(b.group)\n    })\n","export const ValidationError = ({ children }) => (\n  <span className=\"validation\">{children}</span>\n)\n","import { useForm } from 'react-hook-form'\nimport { ErrorMessage } from '@hookform/error-message'\n\nimport { ValidationError } from '../../common/ValidationError'\n\nimport '../../common/css/form.css'\n\nexport const PersonForm = ({ usedNames, usedGroups, onSubmit }) => {\n  const { errors, handleSubmit, register, reset } = useForm()\n\n  const submitHandler = (data) => {\n    onSubmit({\n      name: data['person-name'],\n      group: data['person-group'] === '' ? undefined : data['person-group'],\n    })\n    reset()\n  }\n\n  return (\n    <form onSubmit={handleSubmit(submitHandler)}>\n      <fieldset>\n        <legend>Добавить нового человека</legend>\n        <label htmlFor=\"person-name\" className=\"label-required\">\n          Имя\n        </label>\n        <input\n          id=\"person-name\"\n          name=\"person-name\"\n          type=\"text\"\n          aria-required\n          ref={register({\n            required: 'Требуется имя',\n            validate: (value) =>\n              (value && !usedNames.includes(value)) ||\n              'Имя должно быть уникальным',\n          })}\n        />\n        <ErrorMessage errors={errors} name=\"person-name\" as={ValidationError} />\n\n        <label htmlFor=\"person-group\">Группа</label>\n        <input\n          id=\"person-group\"\n          name=\"person-group\"\n          type=\"text\"\n          list=\"groupOptions\"\n          autoComplete=\"off\"\n          ref={register}\n        />\n        <datalist id=\"groupOptions\">\n          {usedGroups.map((group) => (\n            <option key={group}>{group}</option>\n          ))}\n        </datalist>\n        <p className=\"meta\">\n          Используйте группы для простых исключений, люди в одной группе не\n          попадают друг другу.\n        </p>\n        <button type=\"submit\">Добавить человека</button>\n      </fieldset>\n    </form>\n  )\n}\n","import { useMemo } from 'react'\nimport { Tab, TabList, TabPanels, Tabs, TabPanel } from '@reach/tabs'\n\nimport { Matches } from './matches/Matches'\nimport { PersonForm, Person } from './person'\n\nimport { useStoredState } from '../common/useStoredState'\n\nimport '../common/css/tabs.css'\n\nconst isString = (str) => typeof str === 'string'\n\nexport const Main = () => {\n  const [person, setPerson] = useStoredState('secret-santa-person', [])\n\n  const usedNames = useMemo(() => person.map((p) => p.name), [person])\n  const usedGroups = useMemo(\n    () => [...new Set(person.map((p) => p.group).filter(isString))],\n    [person]\n  )\n\n  const addPerson = (person) => {\n    setPerson((prev) => prev.concat(person))\n  }\n\n  const removePerson = (person) => {\n    setPerson((prevPerson) => prevPerson.filter((p) => p.name !== person.name))\n  }\n\n  const clear = () => {\n    setPerson([])\n  }\n\n  return (\n    <main>\n      <section>\n        <p>\n          Создайте совпадение имен для обмена подарками. Поддерживает\n          группировку людей, для исключения на основе имени группы.\n        </p>\n        <button className=\"danger\" onClick={clear}>\n          Очистить\n        </button>\n      </section>\n      <Tabs>\n        <TabList>\n          <Tab>Люди</Tab>\n          <Tab disabled={person.length < 3}>Совпадения</Tab>\n        </TabList>\n        <TabPanels>\n          <TabPanel>\n            <PersonForm\n              usedNames={usedNames}\n              usedGroups={usedGroups}\n              onSubmit={addPerson}\n            />\n            <Person person={person} removePerson={removePerson} />\n          </TabPanel>\n          <TabPanel>\n            <Matches person={person} />\n          </TabPanel>\n        </TabPanels>\n      </Tabs>\n    </main>\n  )\n}\n","import { useEffect, useState } from 'react'\n\nexport const useStoredState = (key, defaultValue) => {\n  const [value, setValue] = useState(() => {\n    const value = localStorage.getItem(key)\n    return value !== null ? JSON.parse(value) : defaultValue\n  })\n\n  useEffect(() => {\n    localStorage.setItem(key, JSON.stringify(value))\n  }, [value, key])\n\n  return [value, setValue]\n}\n","import './santa.css'\n\nconst Santa = ({ giver, reciver}) => {\n  return (\n    <div className=\"container\">\n      <div className=\"note\">\n        <h4 className=\"note__title\">Здравствуй, {giver}</h4>\n        <h4>\n          Вас назначили тайным сантой для{' '}\n          <span className=\"note__santa\">{reciver}</span>.\n        </h4>\n        <h4>Удачи!</h4>\n      </div>\n    </div>\n  )\n}\n\nexport default Santa\n","import { Main } from './Main'\nimport Santa from './Santa'\nimport { decryptHash, getSearchParameters } from '../common/utils'\n\nconst App = () => {\n  const searchParams = getSearchParameters()\n\n  return (\n    <>\n      <header>\n        <h1>\n          Тайный Санта\n          <span role=\"presentation\" aria-hidden=\"true\">\n            🎅🏼\n          </span>\n        </h1>\n      </header>\n      {searchParams?.giver && searchParams?.key ? (\n        <Santa\n          giver={searchParams?.giver}\n          reciver={decryptHash(searchParams?.key)}\n        />\n      ) : (\n        <Main />\n      )}\n    </>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/App'\n\nimport '@exampledev/new.css'\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}